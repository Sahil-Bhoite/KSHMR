<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org" th:replace="~{base::layout(~{::section})}">

<head>
	<meta charset="ISO-8859-1">
	<title>KSHMR - My Profile</title>
</head>

<body>
	<section>
		<div class="container container-custom py-5 my-5">
			<div class="row mb-5">
				<div class="col-12 text-center">
					<span class="text-uppercase letter-spacing-2 small text-muted mb-2 d-block">Account</span>
					<h1 class="display-4 font-heading">My Profile</h1>
				</div>
			</div>

			<div class="row justify-content-center">
				<div class="col-lg-8">
					<div class="bg-white p-5 shadow-sm border border-light">
						<th:block th:if="${session.succMsg}">
							<div class="alert alert-success text-center rounded-0 border-0 bg-secondary text-dark mb-4">
								<small>[[${session.succMsg}]]</small>
							</div>
							<th:block th:text="${@commnServiceImpl.removeSessionMessage()}"></th:block>
						</th:block>

						<th:block th:if="${session.errorMsg}">
							<div class="alert alert-danger text-center rounded-0 border-0 bg-danger text-white mb-4">
								<small>[[${session.errorMsg}]]</small>
							</div>
							<th:block th:text="${@commnServiceImpl.removeSessionMessage()}"></th:block>
						</th:block>

						<div class="text-center mb-5">
							<div class="position-relative d-inline-block">
								<img alt="Profile" th:src="@{'../img/profile_img/'+${user.profileImage}}"
									class="rounded-circle object-fit-cover border border-secondary p-1"
									style="width: 120px; height: 120px;">
							</div>
						</div>

						<!-- Update Profile Form -->
						<form action="/user/update-profile" method="post" enctype="multipart/form-data" class="mb-5">
							<input type="hidden" th:value="${user.id}" name="id">

							<h5 class="font-heading mb-4 border-bottom pb-2">Personal Information</h5>
							<div class="row g-4 mb-4">
								<div class="col-md-6">
									<label
										class="form-label text-muted small text-uppercase letter-spacing-1 fw-bold">Full
										Name</label>
									<input type="text" name="name"
										class="form-control border-0 border-bottom rounded-0 bg-transparent ps-0 shadow-none"
										th:value="${user.name}">
								</div>
								<div class="col-md-6">
									<label
										class="form-label text-muted small text-uppercase letter-spacing-1 fw-bold">Mobile
										Number</label>
									<input type="text" name="mobileNumber"
										class="form-control border-0 border-bottom rounded-0 bg-transparent ps-0 shadow-none"
										th:value="${user.mobileNumber}">
								</div>
								<div class="col-md-6">
									<label
										class="form-label text-muted small text-uppercase letter-spacing-1 fw-bold">Email</label>
									<input type="text"
										class="form-control border-0 border-bottom rounded-0 bg-transparent ps-0 shadow-none text-muted"
										readonly th:value="${user.email}">
								</div>
								<div class="col-md-6">
									<label
										class="form-label text-muted small text-uppercase letter-spacing-1 fw-bold">Profile
										Image</label>
									<input type="file" name="img"
										class="form-control border-0 border-bottom rounded-0 bg-transparent ps-0 shadow-none">
								</div>
							</div>

							<h5 class="font-heading mb-4 border-bottom pb-2 mt-5">Address Details</h5>
							<div class="row g-4 mb-4">
								<div class="col-12">
									<label
										class="form-label text-muted small text-uppercase letter-spacing-1 fw-bold">Address</label>
									<input type="text" name="address"
										class="form-control border-0 border-bottom rounded-0 bg-transparent ps-0 shadow-none"
										th:value="${user.address}">
								</div>
								<div class="col-md-4">
									<label
										class="form-label text-muted small text-uppercase letter-spacing-1 fw-bold">City</label>
									<input type="text" name="city"
										class="form-control border-0 border-bottom rounded-0 bg-transparent ps-0 shadow-none"
										th:value="${user.city}">
								</div>
								<div class="col-md-4">
									<label
										class="form-label text-muted small text-uppercase letter-spacing-1 fw-bold">State</label>
									<input type="text" name="state"
										class="form-control border-0 border-bottom rounded-0 bg-transparent ps-0 shadow-none"
										th:value="${user.state}">
								</div>
								<div class="col-md-4">
									<label
										class="form-label text-muted small text-uppercase letter-spacing-1 fw-bold">Pincode</label>
									<input type="text" name="pincode"
										class="form-control border-0 border-bottom rounded-0 bg-transparent ps-0 shadow-none"
										th:value="${user.pincode}">
								</div>
							</div>

							<div class="text-end mt-4">
								<button class="btn btn-kshmr px-4">Update Profile</button>
							</div>
						</form>

						<!-- Change Password -->
						<div class="pt-5 border-top">
							<h5 class="font-heading mb-4">Change Password</h5>
							<form action="/user/change-password" method="post">
								<div class="row g-4 align-items-end">
									<div class="col-md-4">
										<label
											class="form-label text-muted small text-uppercase letter-spacing-1 fw-bold">Current
											Password</label>
										<input type="password" name="currentPassword"
											class="form-control border-0 border-bottom rounded-0 bg-transparent ps-0 shadow-none">
									</div>
									<div class="col-md-4">
										<label
											class="form-label text-muted small text-uppercase letter-spacing-1 fw-bold">New
											Password</label>
										<input type="password" name="newPassword"
											class="form-control border-0 border-bottom rounded-0 bg-transparent ps-0 shadow-none">
									</div>
									<div class="col-md-4">
										<label
											class="form-label text-muted small text-uppercase letter-spacing-1 fw-bold">Confirm
											Password</label>
										<input type="password" name="confirmPassword"
											class="form-control border-0 border-bottom rounded-0 bg-transparent ps-0 shadow-none">
									</div>
									<div class="col-12 text-end mt-4">
										<button class="btn btn-outline-kshmr px-4">Change Password</button>
									</div>
								</div>
							</form>
						</div>
					</div>
				</div>
			</div>
		</div>
	</section>
</body>

</html>