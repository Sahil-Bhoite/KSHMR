<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org" th:fragment="layout(content)">

<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>KSHMR - Handcrafted Elegance from Kashmir</title>

	<!-- Favicon -->
	<link rel="icon" type="image/x-icon" href="/img/favicon.png">

	<!-- Bootstrap 5 (Base Grid/Utilities) -->
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet"
		integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">

	<!-- Font Awesome -->
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css"
		integrity="sha512-DTOQO9RWCH3ppGqcWaEA1BIZOC6xxalwEsw9c2QQeAIftl+Vegovlnee1c9QX4TctnWMn13TZye+giMm8e2LwA=="
		crossorigin="anonymous" referrerpolicy="no-referrer" />

	<!-- Google Fonts -->
	<link rel="preconnect" href="https://fonts.googleapis.com">
	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link
		href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600&family=Playfair+Display:ital,wght@0,400;0,500;0,600;0,700;1,400&display=swap"
		rel="stylesheet">

	<!-- Custom CSS -->
	<link rel="stylesheet" href="/css/style.css"> <!-- Legacy/Base -->
	<link rel="stylesheet" href="/css/modern.css"> <!-- New Design System -->
</head>

<body class="d-flex flex-column min-vh-100">

	<!-- Navigation -->
	<nav class="navbar navbar-expand-lg navbar-kshmr fixed-top">
		<div class="container container-custom">
			<a class="navbar-brand navbar-brand-kshmr" href="/">KSHMR</a>

			<button class="navbar-toggler border-0" type="button" data-bs-toggle="collapse" data-bs-target="#navContent"
				aria-controls="navContent" aria-expanded="false" aria-label="Toggle navigation">
				<span class="navbar-toggler-icon"></span>
			</button>

			<div class="collapse navbar-collapse" id="navContent">
				<ul class="navbar-nav mx-auto mb-2 mb-lg-0">
					<li class="nav-item"><a class="nav-link nav-link-kshmr" href="/">Home</a></li>
					<li class="nav-item"><a class="nav-link nav-link-kshmr" href="/products">Shop</a></li>
					<li class="nav-item dropdown">
						<a class="nav-link nav-link-kshmr dropdown-toggle" href="#" role="button"
							data-bs-toggle="dropdown">Categories</a>
						<ul class="dropdown-menu border-0 shadow-lg rounded-0">
							<li><a class="dropdown-item" href="/products?category=Pashmina">Pashmina Shawls</a></li>
							<li><a class="dropdown-item" href="/products?category=Carpets">Handmade Carpets</a></li>
							<li><a class="dropdown-item" href="/products?category=Wood">Walnut Wood</a></li>
							<li><a class="dropdown-item" href="/products?category=Saffron">Saffron & Foods</a></li>
						</ul>
					</li>
					<li class="nav-item"><a class="nav-link nav-link-kshmr" href="/about">About</a></li>
					<li class="nav-item"><a class="nav-link nav-link-kshmr" href="/craftsmanship">Craftsmanship</a></li>
					<li class="nav-item"><a class="nav-link nav-link-kshmr" href="/contact">Contact</a></li>
				</ul>

				<div class="d-flex align-items-center nav-icons">
					<button class="btn-icon" data-bs-toggle="modal" data-bs-target="#searchModal">
						<i class="fa-solid fa-magnifying-glass"></i>
					</button>

					<!-- User Auth Block -->
					<th:block th:if="${user==null}">
						<a href="/signin"
							class="btn-icon ms-2 fs-6 btn btn-sm btn-outline-dark rounded-0 px-3">LOGIN</a>
					</th:block>

					<th:block th:if="${user!=null}">
						<!-- Cart -->
						<a href="/user/cart" class="btn-icon position-relative">
							<i class="fa-solid fa-bag-shopping"></i>
							<span
								class="position-absolute top-0 start-100 translate-middle badge rounded-pill bg-sapphire"
								style="font-size: 0.5rem;" th:if="${countCart > 0}">[[${countCart}]]</span>
						</a>

						<!-- Profile Dropdown -->
						<div class="dropdown d-inline-block ms-1">
							<button class="btn-icon dropdown-toggle" type="button" data-bs-toggle="dropdown">
								<i class="fa-regular fa-user"></i>
							</button>
							<ul class="dropdown-menu dropdown-menu-end border-0 shadow-lg rounded-0 mt-2">
								<li class="px-3 py-2 border-bottom">
									<small class="text-muted d-block">Signed in as</small>
									<div class="fw-bold">[[${user.name}]]</div>
								</li>
								<li th:if="${user.role=='ROLE_USER'}"><a class="dropdown-item" href="/user/profile">My
										Profile</a></li>
								<li th:if="${user.role=='ROLE_ADMIN'}"><a class="dropdown-item"
										href="/admin/profile">Admin Profile</a></li>
								<li th:if="${user.role=='ROLE_ADMIN'}"><a class="dropdown-item"
										href="/admin/">Dashboard</a></li>
								<li th:if="${user.role=='ROLE_USER'}"><a class="dropdown-item"
										href="/user/user-orders">My Orders</a></li>
								<li>
									<hr class="dropdown-divider">
								</li>
								<li><a class="dropdown-item text-danger" href="/logout">Logout</a></li>
							</ul>
						</div>
					</th:block>
				</div>
			</div>
		</div>
	</nav>

	<!-- Main Content -->
	<div class="flex-grow-1" style="padding-top: 76px;"> <!-- Padding for fixed navbar -->
		<div th:replace="${content}"></div>
	</div>

	<!-- Footer -->
	<footer class="footer-kshmr">
		<div class="container container-custom">
			<div class="row g-5">
				<div class="col-lg-4">
					<h2 class="text-white mb-4" style="font-family: var(--font-heading);">KSHMR</h2>
					<p class="text-white-50 mb-4">
						Bridging the gap between the master artisans of the valley and connoisseurs of fine
						craftsmanship.
						Authentic, Ethical, and Timeless.
					</p>
					<div class="social-links">
						<a href="#"><i class="fa-brands fa-instagram"></i></a>
						<a href="#"><i class="fa-brands fa-facebook-f"></i></a>
						<a href="#"><i class="fa-brands fa-pinterest-p"></i></a>
					</div>
				</div>

				<div class="col-lg-2 col-md-4 col-6">
					<h5>Shop</h5>
					<ul class="list-unstyled">
						<li><a href="/products">All Products</a></li>
						<li><a href="/products?category=New">New Arrivals</a></li>
						<li><a href="/products?category=Best">Best Sellers</a></li>
						<li><a href="/products?category=Sale">Seasonal Sale</a></li>
					</ul>
				</div>

				<div class="col-lg-2 col-md-4 col-6">
					<h5>Company</h5>
					<ul class="list-unstyled">
						<li><a href="/about">Our Story</a></li>
						<li><a href="/craftsmanship">Artisans</a></li>
						<li><a href="#">Sustainability</a></li>
						<li><a href="/contact">Contact</a></li>
					</ul>
				</div>

				<div class="col-lg-2 col-md-4 col-6">
					<h5>Support</h5>
					<ul class="list-unstyled">
						<li><a href="#">FAQ</a></li>
						<li><a href="#">Shipping</a></li>
						<li><a href="#">Returns</a></li>
						<li><a href="#">Track Order</a></li>
					</ul>
				</div>

				<div class="col-lg-2">
					<h5>Newsletter</h5>
					<p class="text-white-50 small">Subscribe to receive updates, access to exclusive deals, and more.
					</p>
					<form>
						<div class="input-group">
							<input type="email" class="form-control rounded-0 border-0" placeholder="Your Email">
							<button class="btn btn-gold rounded-0" type="button"><i
									class="fa-solid fa-arrow-right"></i></button>
						</div>
					</form>
				</div>
			</div>

			<div class="row mt-5 pt-4 border-top border-secondary border-opacity-25">
				<div class="col-md-6 text-center text-md-start">
					<p class="small text-white-50 mb-0">&copy; 2024 KSHMR. All Rights Reserved.</p>
				</div>
				<div class="col-md-6 text-center text-md-end">
					<p class="small text-white-50 mb-0">
						<a href="#" class="text-white-50 me-3">Privacy Policy</a>
						<a href="#" class="text-white-50">Terms of Service</a>
					</p>
				</div>
			</div>
		</div>
	</footer>

	<!-- Search Modal -->
	<div class="modal fade" id="searchModal" tabindex="-1" aria-hidden="true">
		<div class="modal-dialog modal-dialog-centered modal-lg">
			<div class="modal-content rounded-0 border-0">
				<div class="modal-body p-5">
					<div class="d-flex justify-content-between align-items-center mb-4">
						<h3 class="font-heading m-0">Search KSHMR</h3>
						<button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
					</div>
					<form action="/products" method="get">
						<div class="input-group border-bottom border-dark">
							<span class="input-group-text bg-white border-0 ps-0"><i
									class="fa-solid fa-magnifying-glass"></i></span>
							<input type="text" class="form-control border-0 shadow-none form-control-lg ps-2" name="ch"
								placeholder="What are you looking for?">
							<button class="btn btn-link text-uppercase text-dark fw-bold" type="submit">Search</button>
						</div>
					</form>
				</div>
			</div>
		</div>
	</div>

	<!-- Scripts -->
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script>
	<script src="https://cdn.jsdelivr.net/npm/jquery-validation@1.19.5/dist/jquery.validate.js"></script>
	<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"
		integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz"
		crossorigin="anonymous"></script>
	<script src="/js/script.js"></script>

	<script>
		// Navbar Scroll Effect
		window.addEventListener('scroll', function () {
			if (window.scrollY > 20) {
				document.querySelector('.navbar-kshmr').style.boxShadow = '0 2px 10px rgba(0,0,0,0.1)';
				document.querySelector('.navbar-kshmr').style.padding = '0.5rem 0';
			} else {
				document.querySelector('.navbar-kshmr').style.boxShadow = 'none';
				document.querySelector('.navbar-kshmr').style.padding = '1rem 0';
			}
		});
	</script>
</body>

</html>